(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(122),s=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"869a0d16-5e83-4767-81e8-4a1edcf41cca"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return s.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowUser:function(e){return s.delete("follow/".concat(e)).then((function(e){return e.data}))}},i={getProfile:function(e){return s.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return s.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return s.put("profile/status",{status:e}).then((function(e){return e.data}))}},o={setAuthUser:function(){return s.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return s.delete("auth/login").then((function(e){return e.data}))}}},240:function(e,t,n){},241:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n(0),c=n.n(s),i=n(60),o=n.n(i),a=n(9),u=n(10),l=n.n(u),f=n(17),p=n(5),d=n(18),j=n(51),h="auth/SET-USER-DATA",b={userId:null,email:null,login:null,isAuth:!1},g=function(e,t,n,r){return{type:h,data:{userId:e,email:t,login:n,isAuth:r}}},O=function(){return function(){var e=Object(f.a)(l.a.mark((function e(t){var n,r,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.setAuthUser();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,c=r.email,i=r.login,t(g(s,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(p.a)(Object(p.a)({},e),t.data);default:return e}},x=n(97),v=n(88),w=n(41),y="users/FOLLOW",S="users/UNFOLLOW",P="users/SET-USERS",k="users/SET-CURRENT-PAGE",T="users/SET-TOTAL-COUNT",U="users/TOGGLE-IS-FETCHING",I="users/TOGGLE-IS-FOLLOWING",N={users:[],pageSize:4,totalUsers:20,currentPage:1,isFetching:!1,followInProgress:[]},C=function(e){return{type:y,userId:e}},_=function(e){return{type:S,userId:e}},A=function(e){return{type:P,users:e}},E=function(e){return{type:U,isFetching:e}},z=function(e,t){return{type:I,isFetching:e,userId:t}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(p.a)(Object(p.a)({},e),{},{followed:!0}):e}))});case S:return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(p.a)(Object(p.a)({},e),{},{followed:!1}):e}))});case P:return Object(p.a)(Object(p.a)({},e),{},{users:t.users});case k:return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case T:return Object(p.a)(Object(p.a)({},e),{},{totalUsers:t.totalUsers});case U:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case I:return Object(p.a)(Object(p.a)({},e),{},{followInProgress:t.isFetching?[].concat(Object(w.a)(e.followInProgress),[t.userId]):e.followInProgress.filter((function(e){return e!=t.userId}))});default:return e}},L="app/INITIALIZED-SUCCESS",M={initialize:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(p.a)(Object(p.a)({},e),{},{initialize:!0});default:return e}},G=n(123),R=n(121),B=Object(a.c)({profilePage:v.b,dialogsPage:x.b,usersPage:F,auth:m,app:D,form:R.a}),H=Object(a.e)(B,Object(a.a)(G.a)),W=n(14),J=(n(240),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,296)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),s(e),c(e),i(e)}))}),K=n(32),Y=n(33),q=n(35),Q=n(34),V=n(13),X=(n(241),function(){return Object(r.jsxs)("div",{className:"navBar",children:[Object(r.jsx)("div",{children:Object(r.jsx)(V.b,{to:"/profile",className:"navBar__link",children:"Profile"})}),Object(r.jsx)("div",{children:Object(r.jsx)(V.b,{to:"/dialogs",className:"navBar__link",children:"Dialogs"})}),Object(r.jsx)("div",{children:Object(r.jsx)(V.b,{to:"/users",className:"navBar__link",children:"Users"})}),Object(r.jsx)("div",{children:Object(r.jsx)(V.b,{to:"/news",className:"navBar__link",children:"News"})}),Object(r.jsx)("div",{children:Object(r.jsx)(V.b,{to:"/settings",className:"navBar__link",children:"Settings"})})]})}),Z=n(11),$=(n(243),function(e){return function(t){return Object(r.jsx)(c.a.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading.."}),children:Object(r.jsx)(e,Object(p.a)({},t))})}}),ee=(n(244),function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"user",children:[Object(r.jsxs)("div",{className:"user__logo",children:[Object(r.jsx)(V.b,{to:"/profile/"+e.id,children:Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:null!=e.src?e.src:"https://e7.pngegg.com/pngimages/409/621/png-clipart-computer-icons-avatar-male-user-profile-others-logo-monochrome.png"})})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{disabled:e.followInProgress.some((function(t){return t===e.id})),onClick:function(){var t,n;t=e.followed,n=e.id,!0===t?e.unfollowThunk(n):e.followThunk(n)},children:e.followed?"Follow":"Unfollow"})})]}),Object(r.jsxs)("div",{className:"user__info",children:[Object(r.jsxs)("div",{className:"user__info-item",children:[Object(r.jsx)("p",{children:e.name}),Object(r.jsx)("p",{children:null!=e.status?e.status:"I'm employe"})]}),Object(r.jsxs)("div",{className:"user__info-item",children:[Object(r.jsx)("p",{children:null!=e.city?e.city:"Los Angeles"}),Object(r.jsx)("p",{children:null!=e.country?e.country:"USA"})]})]})]})})}),te=n(62),ne=(n(245),n(127)),re=(n(246),function(e){for(var t=Math.ceil(e.totalUsers/e.pageSize),n=[],c=1;c<=t;c++)n[c]=c;var i=Math.ceil(t/e.portionSize),o=Object(s.useState)(1),a=Object(ne.a)(o,2),u=a[0],l=a[1],f=(u-1)*e.portionSize+1,p=u*e.portionSize;return Object(r.jsxs)("div",{children:[u>=1&&Object(r.jsx)("button",{onClick:function(){l(u-1)},disabled:1===u,children:"PREV"}),n.filter((function(e){return e>=f&&e<=p})).map((function(t){return Object(r.jsx)("span",{className:e.currentPage===t&&"selected-page",onClick:function(){e.onSetPage(t)},children:t})})),i>=u&&Object(r.jsx)("button",{onClick:function(){l(u+1)},disabled:i===u,children:"NEXT"})]})}),se=function(e){return Object(r.jsxs)("div",{className:"users-content",children:[e.isFetching?Object(r.jsx)(te.a,{}):null,Object(r.jsx)(re,{totalUsers:e.totalUsers,pageSize:e.pageSize,currentPage:e.currentPage,onSetPage:e.onSetPage,portionSize:10}),Object(r.jsxs)("div",{className:"users",children:[e.users.map((function(t){return Object(r.jsx)(ee,{src:t.photos.small,followed:t.followed,name:t.name,status:t.status,city:t.city,country:t.country,id:t.id,followInProgress:e.followInProgress,followThunk:e.followThunk,unfollowThunk:e.unfollowThunk})})),";"]})]})},ce=n(126),ie=Object(ce.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),oe=function(e){return e.usersPage.pageSize},ae=function(e){return e.usersPage.totalUsers},ue=function(e){return e.usersPage.currentPage},le=function(e){return e.usersPage.isFetching},fe=function(e){return e.usersPage.followInProgress},pe=function(e){Object(q.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(K.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).onSetPage=function(t){e.props.setCurrentPageThunk(t,e.props.pageSize)},e}return Object(Y.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e!=this.props||t!=this.state}},{key:"componentDidMount",value:function(){this.props.getUsersThunk(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(se,{totalUsers:this.props.totalUsers,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onSetPage:this.onSetPage,users:this.props.users,isFetching:this.props.isFetching,followInProgress:this.props.followInProgress,followThunk:this.props.followThunk,unfollowThunk:this.props.unfollowThunk})})}}]),n}(c.a.Component),de=Object(W.b)((function(e){return{users:ie(e),pageSize:oe(e),totalUsers:ae(e),currentPage:ue(e),isFetching:le(e),followInProgress:fe(e)}}),{setUsers:A,getUsersThunk:function(e,t){return function(){var n=Object(f.a)(l.a.mark((function n(r){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(E(!0)),n.next=3,d.c.getUsers(e,t);case 3:s=n.sent,r(A(s.items)),r((c=s.totalCount,{type:T,totalUsers:c})),r(E(!1));case 7:case"end":return n.stop()}var c}),n)})));return function(e){return n.apply(this,arguments)}}()},setCurrentPageThunk:function(e,t){return function(){var n=Object(f.a)(l.a.mark((function n(r){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:k,currentPage:e}),r(E(!0)),n.next=4,d.c.getUsers(e,t);case 4:s=n.sent,r(A(s.items)),r(E(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},followThunk:function(e){return function(){var t=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(z(!0,e)),t.next=3,d.c.followUser(e);case 3:0===t.sent.resultCode&&n(C(e)),n(z(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollowThunk:function(e){return function(){var t=Object(f.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(z(!0,e)),t.next=3,d.c.unfollowUser(e);case 3:0===t.sent.resultCode&&n(_(e)),n(z(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(pe),je=(n(247),function(e){return Object(r.jsx)("header",{className:"header",children:Object(r.jsxs)("div",{className:"header__logo",children:[Object(r.jsx)("img",{className:"header__logo-img",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8kUldOfNMU_JC_Fr7aGWlUPMsM08w-ufdKg&usqp=CAU"}),Object(r.jsx)("p",{className:"header__logo-slogan",children:"New social network"}),e.isAuth?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:e.login}),Object(r.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(r.jsx)(V.b,{className:"header__logo-link",to:"/login",children:"Login"})]})})}),he=function(e){Object(q.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(K.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"render",value:function(){return Object(r.jsx)(je,Object(p.a)({},this.props))}}]),n}(c.a.Component),be=Object(W.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(f.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.logout();case 2:0===e.sent.resultCode&&t(g(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(he),ge=n(119),Oe=n(120),me=(n(128),Object(Oe.a)({form:"Login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(ge.a,{placeholder:"email",name:"email",component:"input"})}),Object(r.jsx)("div",{children:Object(r.jsx)(ge.a,{placeholder:"password",name:"password",component:"input",type:"password"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(ge.a,{type:"checkbox",name:"rememberMe",component:"input"}),"Remember me"]}),e.error&&Object(r.jsx)("div",{className:"text-error",children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})}))),xe=Object(W.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(f.a)(l.a.mark((function r(s){var c,i;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.login(e,t,n);case 2:0===(c=r.sent).resultCode?s(O()):(i=c.messages.length>0?c.messages[0]:"Some error",s(Object(j.a)("Login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(Z.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(me,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),ve=c.a.lazy((function(){return n.e(4).then(n.bind(null,298))})),we=c.a.lazy((function(){return n.e(3).then(n.bind(null,297))})),ye=function(e){Object(q.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(K.a)(this,n),t.apply(this,arguments)}return Object(Y.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialize?Object(r.jsxs)("div",{children:[Object(r.jsx)(be,{}),Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(X,{}),Object(r.jsx)(Z.b,{path:"/dialogs",render:$(ve)}),Object(r.jsx)(Z.b,{path:"/profile/:userId?",render:$(we)}),Object(r.jsx)(Z.b,{path:"/users",render:function(){return Object(r.jsx)(de,{})}}),Object(r.jsx)(Z.b,{path:"/login",render:function(){return Object(r.jsx)(xe,{})}})]})]}):Object(r.jsx)(te.a,{})}}]),n}(c.a.Component),Se=Object(a.d)(Z.f,Object(W.b)((function(e){return{initialize:e.app.initialize}}),{initializeApp:function(){return function(e){var t=e(O());Promise.all([t]).then((function(){e({type:L})}))}}}))(ye),Pe=function(e){return Object(r.jsx)(W.a,{store:H,children:Object(r.jsx)(V.a,{children:Object(r.jsx)(Se,{})})})},ke=function(e){o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Pe,{})}),document.getElementById("root"))};ke(H.getState()),H.subscribe((function(){H.getState();ke()})),J()},62:function(e,t,n){"use strict";var r=n(1),s=(n(0),n.p+"static/media/preloader.9f7eabcd.svg");t.a=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:s})})}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"e",(function(){return O}));var r=n(10),s=n.n(r),c=n(17),i=n(41),o=n(5),a=n(18),u="profile/ADD-POST",l="profile/SET-USERS-PROFILE",f="profile/SET-STATUS",p="profile/DELETE-POST",d={posts:[{id:1,msg:"Hi!",likes:15,img:"https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"},{id:2,msg:"Hello!",likes:7,img:"https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"}],postText:"",profile:null,status:""},j=function(e){return{type:u,newPost:e}},h=function(e){return{type:f,status:e}},b=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.b.getProfile(e);case 2:r=t.sent,n({type:l,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.b.getStatus(e);case 2:r=t.sent,n(h(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(h(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n={id:3,msg:t.newPost,likes:10,img:"https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"};return Object(o.a)(Object(o.a)({},e),{},{posts:[].concat(Object(i.a)(e.posts),[n])});case l:return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case f:return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case p:return Object(o.a)(Object(o.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.id}))});default:return e}}},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(41),s=n(5),c="dialogs/ADD-MESSAGE",i={dialogs:[{dialog:"Dan",id:1},{dialog:"Kate",id:2},{dialog:"John",id:3},{dialog:"Sam",id:4},{dialog:"Mathew",id:5}],messages:[{message:"Hi",id:1},{message:"Hello",id:2},{message:"How are you",id:3},{message:"What's up?",id:4},{message:"Yoo Yoo",id:5}]},o=function(e){return{type:c,newMessage:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{id:10,message:t.newMessage}])});default:return e}}}},[[285,1,2]]]);
//# sourceMappingURL=main.09d79173.chunk.js.map